
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>ifversion</title><meta name="generator" content="MATLAB 9.10"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2021-09-26"><meta name="DC.source" content="ifversion.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>ifversion</h1><!--introduction--><p><tt style="font-size:0%">Formatted documentation for the ifversion function.</tt>
<div style="margin-top:-5em;color:grey">Determine if the current version satisfies a version restriction
</div>
</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li><li><a href="#2">Syntax</a></li><li><a href="#3">Output arguments</a></li><li><a href="#4">Input arguments</a></li><li><a href="#5">Examples</a></li><li><a href="#6">Compatibility, version info, and licence</a></li><li><a href="#7">Test suite</a></li></ul></div><h2 id="1">Description</h2><p>
This minitool helps you determine the version of Matlab (or Octave) that is running your code.
This is helpful when imposing a minimum version requirement, or when different versions need
different methods to reach the same end result. By using persistent variables this will stay fast
even with repeated calls.
<br>
<br>You shouldn't use a logical test with <code>v=version;v=str2double(v(1:3));</code> as it is
incomplete for several releases (like e.g. 9.10&nbsp;(R2021a) or a future version&nbsp;10.1).
That also includes the potential for float rounding errors.
<br>
<br>To keep the function fast, no input checking is done. This function returns a
<code>NaN</code> if a release name is used that is not in the dictionary.
<br>
<br>The conversion is based on a manual list and therefore needs to be updated manually, so it
might not be complete. Although it should be possible to load the list from Wikipedia, this is
not implemented.
</p><h2 id="2">Syntax</h2><pre class="language-matlab">tf=ifversion(test,Rxxxxab)
tf=ifversion(test,Rxxxxab,<span class="string">'Octave'</span>,test_for_Octave,v_Octave)
</pre><h2 id="3">Output arguments</h2><p>
<table border=1>
<tr><td>
tf
</td><td>
If the current version satisfies the test this returns true.
<br>This works similar to verLessThan.
</td></tr>
</table>
</p><h2 id="4">Input arguments</h2><p>
<table border=1>
<tr><td>
test
</td><td>
Char array containing a logical test. The interpretation of this is equivalent to
<code>eval([current&nbsp;test&nbsp;Rxxxxab])</code>. For examples, see below.
</td></tr>
<tr><td>
Rxxxxab
</td><td>
Char array containing a release description (e.g. <code>'R13'</code>, <code>'R14SP2'</code> or
<code>'R2019a'</code>) or the numeric version.
</td></tr>
<tr><td>
test_for_Octave
</td><td>
See the <code>test</code> parameter. If not provided, the same test will run on GNU&nbsp;Octave
as on Matlab. This will also trigger a warning.
</td></tr>
<tr><td>
v_Octave
</td><td>
The numeric version of Octave. If not provided, the same test will run on GNU&nbsp;Octave as on
Matlab. This will also trigger a warning.
</td></tr>
</table>
</p><h2 id="5">Examples</h2><pre>ifversion('&gt;=','R2009a')         % returns true when run on R2009a or later
ifversion('&lt;','R2016a')          % returns true when run on R2015b or older
ifversion('==','R2018a')         % returns true only when run on R2018a
ifversion('==',9.9)              % returns true only when run on R2020b
ifversion('&lt;',0,'Octave','&gt;',0)  % returns true only on Octave
ifversion('&lt;',0,'Octave','&gt;=',6) % returns true only on Octave 6 and higher</pre><h2 id="6">Compatibility, version info, and licence</h2><p>
Compatibility considerations:
<ul>
   <li>This is expected to work on all releases.</li>
</ul>
</p><p>
<table>
<tr>
<td> Test suite result </td>
<td style="border:2px solid black;"> Windows XP/7/10 </td>
<td style="border:2px solid black;"> Ubuntu 20.04 LTS </td>
<td style="border:2px solid black;"> MacOS 10.15 Catalina </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2021a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>Pass</it> </td>
<td> <it>Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2020b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2020a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2018a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2017b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2017a </td>
<td> <it>W7 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2016a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2015a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2013b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2012b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2012a </td>
<td> <it></it> </td>
<td> <it>Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2011a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2010b </td>
<td> <it></it> </td>
<td> <it>Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2010a </td>
<td> <it>W7 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 6.3.0 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 6.2.0 </td>
<td> <it></it> </td>
<td> <it></it> </td>
<td> <it>Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 5.2.0 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 4.4.1 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it>Pass</it> </td>
</tr>
</table>
</p><pre>Version: 1.1.1
Date:    2022-03-14
Author:  H.J. Wisselink
Licence: CC by-nc-sa 4.0 ( https://creativecommons.org/licenses/by-nc-sa/4.0 )
Email = 'h_j_wisselink*alumnus_utwente_nl';
Real_email = regexprep(Email,{'*','_'},{'@','.'})</pre><h2 id="7">Test suite</h2><p>This tester is included so you can test if your own modifications would introduce any bugs. These tests form the basis for the compatibility table above.</p><pre class="codeinput"><span class="keyword">function</span> pass_part_fail=aaa___ifversion___test(varargin)
<span class="comment">%This is not a true test suite, but it should confirm the function runs without errors.</span>
<span class="comment">%</span>
<span class="comment">%Pass:    passes all tests</span>
<span class="comment">%Partial: [no partial passing condition]</span>
<span class="comment">%Fail:    fails any test</span>
pass_part_fail=<span class="string">'pass'</span>;

<span class="keyword">if</span> nargin==0,RunTestHeadless=false;<span class="keyword">else</span>,RunTestHeadless=true;<span class="keyword">end</span>

<span class="keyword">try</span> ME=[]; <span class="comment">%#ok&lt;NASGU&gt;</span>
    w=warning(<span class="string">'off'</span>,<span class="string">'HJW:ifversion:NoOctaveTest'</span>);
    clc
    RunExamples
    warning(w);<span class="comment">% Reset warning.</span>
<span class="keyword">catch</span> ME;<span class="keyword">if</span> isempty(ME),ME=lasterror;<span class="keyword">end</span> <span class="comment">%#ok&lt;LERR&gt;</span>
    warning(w);
    <span class="keyword">if</span> nargout&gt;0
        pass_part_fail=<span class="string">'fail'</span>;
    <span class="keyword">else</span>
        rethrow(ME)
    <span class="keyword">end</span>
<span class="keyword">end</span>
<span class="keyword">if</span> RunTestHeadless,clc,<span class="keyword">end</span>
disp([<span class="string">'tester function '</span> mfilename <span class="string">' finished '</span>])
<span class="keyword">if</span> nargout==0,clear,<span class="keyword">end</span>
<span class="keyword">end</span>
<span class="keyword">function</span> RunExamples
fprintf(<span class="string">'Do the claims below match the actual version?\nv: %s\n\n'</span>,version)
fprintf(<span class="string">'['</span>),<span class="keyword">if</span> ifversion(<span class="string">'&gt;='</span>,<span class="string">'R2009a'</span>),fprintf(<span class="string">'X'</span>),<span class="keyword">else</span>,fprintf(<span class="string">' '</span>),<span class="keyword">end</span>,disp(<span class="string">'] R2009a or later'</span>)
fprintf(<span class="string">'['</span>),<span class="keyword">if</span> ifversion(<span class="string">'&lt;'</span>,<span class="string">'R2016a'</span>),fprintf(<span class="string">'X'</span>),<span class="keyword">else</span>,fprintf(<span class="string">' '</span>),<span class="keyword">end</span>,disp(<span class="string">'] R2015b or older'</span>)
fprintf(<span class="string">'['</span>),<span class="keyword">if</span> ifversion(<span class="string">'=='</span>,<span class="string">'R2018a'</span>),fprintf(<span class="string">'X'</span>),<span class="keyword">else</span>,fprintf(<span class="string">' '</span>),<span class="keyword">end</span>,disp(<span class="string">'] R2018a'</span>)
fprintf(<span class="string">'['</span>),<span class="keyword">if</span> ifversion(<span class="string">'=='</span>,9.9),fprintf(<span class="string">'X'</span>),<span class="keyword">else</span>,fprintf(<span class="string">' '</span>),<span class="keyword">end</span>,disp(<span class="string">'] R2020b'</span>)
fprintf(<span class="string">'['</span>),<span class="keyword">if</span> ifversion(<span class="string">'&lt;'</span>,0,<span class="string">'Octave'</span>,<span class="string">'&gt;'</span>,0),fprintf(<span class="string">'X'</span>),<span class="keyword">else</span>,fprintf(<span class="string">' '</span>),<span class="keyword">end</span>,disp(<span class="string">'] Octave'</span>)
fprintf(<span class="string">'['</span>),<span class="keyword">if</span> ifversion(<span class="string">'&lt;'</span>,0,<span class="string">'Octave'</span>,<span class="string">'&gt;='</span>,6),fprintf(<span class="string">'X'</span>),<span class="keyword">else</span>,fprintf(<span class="string">' '</span>),<span class="keyword">end</span>,disp(<span class="string">'] Octave 6 and higher'</span>)
<span class="keyword">end</span>
<span class="keyword">function</span> tf=ifversion(test,Rxxxxab,Oct_flag,Oct_test,Oct_ver)
<span class="comment">%Determine if the current version satisfies a version restriction</span>
<span class="comment">%</span>
<span class="comment">% To keep the function fast, no input checking is done. This function returns a NaN if a release</span>
<span class="comment">% name is used that is not in the dictionary.</span>
<span class="comment">%</span>
<span class="comment">% Syntax:</span>
<span class="comment">% tf=ifversion(test,Rxxxxab)</span>
<span class="comment">% tf=ifversion(test,Rxxxxab,'Octave',test_for_Octave,v_Octave)</span>
<span class="comment">%</span>
<span class="comment">% Output:</span>
<span class="comment">% tf       - If the current version satisfies the test this returns true.</span>
<span class="comment">%            This works similar to verLessThan.</span>
<span class="comment">%</span>
<span class="comment">% Inputs:</span>
<span class="comment">% Rxxxxab - Char array containing a release description (e.g. 'R13', 'R14SP2' or 'R2019a') or the</span>
<span class="comment">%           numeric version.</span>
<span class="comment">% test    - Char array containing a logical test. The interpretation of this is equivalent to</span>
<span class="comment">%           eval([current test Rxxxxab]). For examples, see below.</span>
<span class="comment">%</span>
<span class="comment">% Examples:</span>
<span class="comment">% ifversion('&gt;=','R2009a') returns true when run on R2009a or later</span>
<span class="comment">% ifversion('&lt;','R2016a') returns true when run on R2015b or older</span>
<span class="comment">% ifversion('==','R2018a') returns true only when run on R2018a</span>
<span class="comment">% ifversion('==',9.9) returns true only when run on R2020b</span>
<span class="comment">% ifversion('&lt;',0,'Octave','&gt;',0) returns true only on Octave</span>
<span class="comment">% ifversion('&lt;',0,'Octave','&gt;=',6) returns true only on Octave 6 and higher</span>
<span class="comment">%</span>
<span class="comment">% The conversion is based on a manual list and therefore needs to be updated manually, so it might</span>
<span class="comment">% not be complete. Although it should be possible to load the list from Wikipedia, this is not</span>
<span class="comment">% implemented.</span>
<span class="comment">%</span>
<span class="comment">%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%</span>
<span class="comment">%|                                                                         |%</span>
<span class="comment">%|  Version: 1.1.1                                                         |%</span>
<span class="comment">%|  Date:    2022-03-14                                                    |%</span>
<span class="comment">%|  Author:  H.J. Wisselink                                                |%</span>
<span class="comment">%|  Licence: CC by-nc-sa 4.0 ( creativecommons.org/licenses/by-nc-sa/4.0 ) |%</span>
<span class="comment">%|  Email = 'h_j_wisselink*alumnus_utwente_nl';                            |%</span>
<span class="comment">%|  Real_email = regexprep(Email,{'*','_'},{'@','.'})                      |%</span>
<span class="comment">%|                                                                         |%</span>
<span class="comment">%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%</span>
<span class="comment">%</span>
<span class="comment">% Tested on several versions of Matlab (ML 6.5 and onward) and Octave (4.4.1 and onward), and on</span>
<span class="comment">% multiple operating systems (Windows/Ubuntu/MacOS). For the full test matrix, see the HTML doc.</span>
<span class="comment">% Compatibility considerations:</span>
<span class="comment">% - This is expected to work on all releases.</span>

<span class="comment">%The decimal of the version numbers are padded with a 0 to make sure v7.10 is larger than v7.9.</span>
<span class="comment">%This does mean that any numeric version input needs to be adapted. multiply by 100 and round to</span>
<span class="comment">%remove the potential for float rounding errors.</span>
<span class="comment">%Store in persistent for fast recall (don't use getpref, as that is slower than generating the</span>
<span class="comment">%variables and makes updating this function harder).</span>
<span class="keyword">persistent</span>  v_num v_dict octave
<span class="keyword">if</span> isempty(v_num)
    <span class="comment">%test if Octave is used instead of Matlab</span>
    octave=exist(<span class="string">'OCTAVE_VERSION'</span>, <span class="string">'builtin'</span>);

    <span class="comment">%get current version number</span>
    v_num=version;
    ii=strfind(v_num,<span class="string">'.'</span>);<span class="keyword">if</span> numel(ii)~=1,v_num(ii(2):end)=<span class="string">''</span>;ii=ii(1);<span class="keyword">end</span>
    v_num=[str2double(v_num(1:(ii-1))) str2double(v_num((ii+1):end))];
    v_num=v_num(1)+v_num(2)/100;v_num=round(100*v_num);

    <span class="comment">%get dictionary to use for ismember</span>
    v_dict={<span class="keyword">...</span>
        <span class="string">'R13'</span> 605;<span class="string">'R13SP1'</span> 605;<span class="string">'R13SP2'</span> 605;<span class="string">'R14'</span> 700;<span class="string">'R14SP1'</span> 700;<span class="string">'R14SP2'</span> 700;
        <span class="string">'R14SP3'</span> 701;<span class="string">'R2006a'</span> 702;<span class="string">'R2006b'</span> 703;<span class="string">'R2007a'</span> 704;<span class="string">'R2007b'</span> 705;
        <span class="string">'R2008a'</span> 706;<span class="string">'R2008b'</span> 707;<span class="string">'R2009a'</span> 708;<span class="string">'R2009b'</span> 709;<span class="string">'R2010a'</span> 710;
        <span class="string">'R2010b'</span> 711;<span class="string">'R2011a'</span> 712;<span class="string">'R2011b'</span> 713;<span class="string">'R2012a'</span> 714;<span class="string">'R2012b'</span> 800;
        <span class="string">'R2013a'</span> 801;<span class="string">'R2013b'</span> 802;<span class="string">'R2014a'</span> 803;<span class="string">'R2014b'</span> 804;<span class="string">'R2015a'</span> 805;
        <span class="string">'R2015b'</span> 806;<span class="string">'R2016a'</span> 900;<span class="string">'R2016b'</span> 901;<span class="string">'R2017a'</span> 902;<span class="string">'R2017b'</span> 903;
        <span class="string">'R2018a'</span> 904;<span class="string">'R2018b'</span> 905;<span class="string">'R2019a'</span> 906;<span class="string">'R2019b'</span> 907;<span class="string">'R2020a'</span> 908;
        <span class="string">'R2020b'</span> 909;<span class="string">'R2021a'</span> 910;<span class="string">'R2021b'</span> 911;<span class="string">'R2022a'</span> 912};
<span class="keyword">end</span>

<span class="keyword">if</span> octave
    <span class="keyword">if</span> nargin==2
        warning(<span class="string">'HJW:ifversion:NoOctaveTest'</span>,<span class="keyword">...</span>
            [<span class="string">'No version test for Octave was provided.'</span>,char(10),<span class="keyword">...</span>
            <span class="string">'This function might return an unexpected outcome.'</span>]) <span class="comment">%#ok&lt;CHARTEN&gt;</span>
        <span class="keyword">if</span> isnumeric(Rxxxxab)
            v=0.1*Rxxxxab+0.9*fix(Rxxxxab);v=round(100*v);
        <span class="keyword">else</span>
            L=ismember(v_dict(:,1),Rxxxxab);
            <span class="keyword">if</span> sum(L)~=1
                warning(<span class="string">'HJW:ifversion:NotInDict'</span>,<span class="keyword">...</span>
                    <span class="string">'The requested version is not in the hard-coded list.'</span>)
                tf=NaN;<span class="keyword">return</span>
            <span class="keyword">else</span>
                v=v_dict{L,2};
            <span class="keyword">end</span>
        <span class="keyword">end</span>
    <span class="keyword">elseif</span> nargin==4
        <span class="comment">% Undocumented shorthand syntax: skip the 'Octave' argument.</span>
        [test,v]=deal(Oct_flag,Oct_test);
        <span class="comment">% Convert 4.1 to 401.</span>
        v=0.1*v+0.9*fix(v);v=round(100*v);
    <span class="keyword">else</span>
        [test,v]=deal(Oct_test,Oct_ver);
        <span class="comment">% Convert 4.1 to 401.</span>
        v=0.1*v+0.9*fix(v);v=round(100*v);
    <span class="keyword">end</span>
<span class="keyword">else</span>
    <span class="comment">% Convert R notation to numeric and convert 9.1 to 901.</span>
    <span class="keyword">if</span> isnumeric(Rxxxxab)
        v=0.1*Rxxxxab+0.9*fix(Rxxxxab);v=round(100*v);
    <span class="keyword">else</span>
        L=ismember(v_dict(:,1),Rxxxxab);
        <span class="keyword">if</span> sum(L)~=1
            warning(<span class="string">'HJW:ifversion:NotInDict'</span>,<span class="keyword">...</span>
                <span class="string">'The requested version is not in the hard-coded list.'</span>)
            tf=NaN;<span class="keyword">return</span>
        <span class="keyword">else</span>
            v=v_dict{L,2};
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>
<span class="keyword">switch</span> test
    <span class="keyword">case</span> <span class="string">'=='</span>, tf= v_num == v;
    <span class="keyword">case</span> <span class="string">'&lt;'</span> , tf= v_num &lt;  v;
    <span class="keyword">case</span> <span class="string">'&lt;='</span>, tf= v_num &lt;= v;
    <span class="keyword">case</span> <span class="string">'&gt;'</span> , tf= v_num &gt;  v;
    <span class="keyword">case</span> <span class="string">'&gt;='</span>, tf= v_num &gt;= v;
<span class="keyword">end</span>
<span class="keyword">end</span>
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2021a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% ifversion
%
% <html><tt style="font-size:0%">Formatted documentation for the ifversion function.</tt>
% <div style="margin-top:-5em;color:grey">Determine if the current version satisfies a version restriction
% </div>
% </html>

%% Description
% <html>
% This minitool helps you determine the version of Matlab (or Octave) that is running your code.
% This is helpful when imposing a minimum version requirement, or when different versions need
% different methods to reach the same end result. By using persistent variables this will stay fast
% even with repeated calls.
% <br>
% <br>You shouldn't use a logical test with <code>v=version;v=str2double(v(1:3));</code> as it is
% incomplete for several releases (like e.g. 9.10&nbsp;(R2021a) or a future version&nbsp;10.1).
% That also includes the potential for float rounding errors.
% <br>
% <br>To keep the function fast, no input checking is done. This function returns a
% <code>NaN</code> if a release name is used that is not in the dictionary.
% <br>
% <br>The conversion is based on a manual list and therefore needs to be updated manually, so it
% might not be complete. Although it should be possible to load the list from Wikipedia, this is
% not implemented.
% </html>

%% Syntax
%
%   tf=ifversion(test,Rxxxxab)
%   tf=ifversion(test,Rxxxxab,'Octave',test_for_Octave,v_Octave)

%% Output arguments
%
% <html>
% <table border=1>
% <tr><td>
% tf
% </td><td>
% If the current version satisfies the test this returns true.
% <br>This works similar to verLessThan.
% </td></tr>
% </table>
% </html>

%% Input arguments
%
% <html>
% <table border=1>
% <tr><td>
% test
% </td><td>
% Char array containing a logical test. The interpretation of this is equivalent to
% <code>eval([current&nbsp;test&nbsp;Rxxxxab])</code>. For examples, see below.
% </td></tr>
% <tr><td>
% Rxxxxab
% </td><td>
% Char array containing a release description (e.g. <code>'R13'</code>, <code>'R14SP2'</code> or
% <code>'R2019a'</code>) or the numeric version.
% </td></tr>
% <tr><td>
% test_for_Octave
% </td><td>
% See the <code>test</code> parameter. If not provided, the same test will run on GNU&nbsp;Octave
% as on Matlab. This will also trigger a warning.
% </td></tr>
% <tr><td>
% v_Octave
% </td><td>
% The numeric version of Octave. If not provided, the same test will run on GNU&nbsp;Octave as on
% Matlab. This will also trigger a warning.
% </td></tr>
% </table>
% </html>

%% Examples
%
%  ifversion('>=','R2009a')         % returns true when run on R2009a or later
%  ifversion('<','R2016a')          % returns true when run on R2015b or older
%  ifversion('==','R2018a')         % returns true only when run on R2018a
%  ifversion('==',9.9)              % returns true only when run on R2020b
%  ifversion('<',0,'Octave','>',0)  % returns true only on Octave
%  ifversion('<',0,'Octave','>=',6) % returns true only on Octave 6 and higher

%% Compatibility, version info, and licence
% <html>
% Compatibility considerations:
% <ul>
%    <li>This is expected to work on all releases.</li>
% </ul>
% </html>
% 
% <html>
% <table>
% <tr>
% <td> Test suite result </td>
% <td style="border:2px solid black;"> Windows XP/7/10 </td>
% <td style="border:2px solid black;"> Ubuntu 20.04 LTS </td>
% <td style="border:2px solid black;"> MacOS 10.15 Catalina </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2021a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>Pass</it> </td>
% <td> <it>Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2020b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2020a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2018a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2017b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2017a </td>
% <td> <it>W7 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2016a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2015a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2013b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2012b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2012a </td>
% <td> <it></it> </td>
% <td> <it>Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2011a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2010b </td>
% <td> <it></it> </td>
% <td> <it>Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2010a </td>
% <td> <it>W7 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 6.3.0 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 6.2.0 </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% <td> <it>Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 5.2.0 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 4.4.1 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it>Pass</it> </td>
% </tr>
% </table>
% </html>
%
%  Version: 1.1.1
%  Date:    2022-03-14
%  Author:  H.J. Wisselink
%  Licence: CC by-nc-sa 4.0 ( https://creativecommons.org/licenses/by-nc-sa/4.0 )
%  Email = 'h_j_wisselink*alumnus_utwente_nl';
%  Real_email = regexprep(Email,{'*','_'},{'@','.'})

%% Test suite
%
% This tester is included so you can test if your own modifications would introduce any bugs. These
% tests form the basis for the compatibility table above.
% 
function pass_part_fail=aaa___ifversion___test(varargin)
%This is not a true test suite, but it should confirm the function runs without errors.
%
%Pass:    passes all tests
%Partial: [no partial passing condition]
%Fail:    fails any test
pass_part_fail='pass';

if nargin==0,RunTestHeadless=false;else,RunTestHeadless=true;end

try ME=[]; %#ok<NASGU>
    w=warning('off','HJW:ifversion:NoOctaveTest');
    clc
    RunExamples
    warning(w);% Reset warning.
catch ME;if isempty(ME),ME=lasterror;end %#ok<LERR>
    warning(w);
    if nargout>0
        pass_part_fail='fail';
    else
        rethrow(ME)
    end
end
if RunTestHeadless,clc,end
disp(['tester function ' mfilename ' finished '])
if nargout==0,clear,end
end
function RunExamples
fprintf('Do the claims below match the actual version?\nv: %s\n\n',version)
fprintf('['),if ifversion('>=','R2009a'),fprintf('X'),else,fprintf(' '),end,disp('] R2009a or later')
fprintf('['),if ifversion('<','R2016a'),fprintf('X'),else,fprintf(' '),end,disp('] R2015b or older')
fprintf('['),if ifversion('==','R2018a'),fprintf('X'),else,fprintf(' '),end,disp('] R2018a')
fprintf('['),if ifversion('==',9.9),fprintf('X'),else,fprintf(' '),end,disp('] R2020b')
fprintf('['),if ifversion('<',0,'Octave','>',0),fprintf('X'),else,fprintf(' '),end,disp('] Octave')
fprintf('['),if ifversion('<',0,'Octave','>=',6),fprintf('X'),else,fprintf(' '),end,disp('] Octave 6 and higher')
end
function tf=ifversion(test,Rxxxxab,Oct_flag,Oct_test,Oct_ver)
%Determine if the current version satisfies a version restriction
%
% To keep the function fast, no input checking is done. This function returns a NaN if a release
% name is used that is not in the dictionary.
%
% Syntax:
% tf=ifversion(test,Rxxxxab)
% tf=ifversion(test,Rxxxxab,'Octave',test_for_Octave,v_Octave)
%
% Output:
% tf       - If the current version satisfies the test this returns true.
%            This works similar to verLessThan.
%
% Inputs:
% Rxxxxab - Char array containing a release description (e.g. 'R13', 'R14SP2' or 'R2019a') or the
%           numeric version.
% test    - Char array containing a logical test. The interpretation of this is equivalent to
%           eval([current test Rxxxxab]). For examples, see below.
%
% Examples:
% ifversion('>=','R2009a') returns true when run on R2009a or later
% ifversion('<','R2016a') returns true when run on R2015b or older
% ifversion('==','R2018a') returns true only when run on R2018a
% ifversion('==',9.9) returns true only when run on R2020b
% ifversion('<',0,'Octave','>',0) returns true only on Octave
% ifversion('<',0,'Octave','>=',6) returns true only on Octave 6 and higher
%
% The conversion is based on a manual list and therefore needs to be updated manually, so it might
% not be complete. Although it should be possible to load the list from Wikipedia, this is not
% implemented.
%
%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%
%|                                                                         |%
%|  Version: 1.1.1                                                         |%
%|  Date:    2022-03-14                                                    |%
%|  Author:  H.J. Wisselink                                                |%
%|  Licence: CC by-nc-sa 4.0 ( creativecommons.org/licenses/by-nc-sa/4.0 ) |%
%|  Email = 'h_j_wisselink*alumnus_utwente_nl';                            |%
%|  Real_email = regexprep(Email,{'*','_'},{'@','.'})                      |%
%|                                                                         |%
%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%/%
%
% Tested on several versions of Matlab (ML 6.5 and onward) and Octave (4.4.1 and onward), and on
% multiple operating systems (Windows/Ubuntu/MacOS). For the full test matrix, see the HTML doc.
% Compatibility considerations:
% - This is expected to work on all releases.

%The decimal of the version numbers are padded with a 0 to make sure v7.10 is larger than v7.9.
%This does mean that any numeric version input needs to be adapted. multiply by 100 and round to
%remove the potential for float rounding errors.
%Store in persistent for fast recall (don't use getpref, as that is slower than generating the
%variables and makes updating this function harder).
persistent  v_num v_dict octave
if isempty(v_num)
    %test if Octave is used instead of Matlab
    octave=exist('OCTAVE_VERSION', 'builtin');
    
    %get current version number
    v_num=version;
    ii=strfind(v_num,'.');if numel(ii)~=1,v_num(ii(2):end)='';ii=ii(1);end
    v_num=[str2double(v_num(1:(ii-1))) str2double(v_num((ii+1):end))];
    v_num=v_num(1)+v_num(2)/100;v_num=round(100*v_num);
    
    %get dictionary to use for ismember
    v_dict={...
        'R13' 605;'R13SP1' 605;'R13SP2' 605;'R14' 700;'R14SP1' 700;'R14SP2' 700;
        'R14SP3' 701;'R2006a' 702;'R2006b' 703;'R2007a' 704;'R2007b' 705;
        'R2008a' 706;'R2008b' 707;'R2009a' 708;'R2009b' 709;'R2010a' 710;
        'R2010b' 711;'R2011a' 712;'R2011b' 713;'R2012a' 714;'R2012b' 800;
        'R2013a' 801;'R2013b' 802;'R2014a' 803;'R2014b' 804;'R2015a' 805;
        'R2015b' 806;'R2016a' 900;'R2016b' 901;'R2017a' 902;'R2017b' 903;
        'R2018a' 904;'R2018b' 905;'R2019a' 906;'R2019b' 907;'R2020a' 908;
        'R2020b' 909;'R2021a' 910;'R2021b' 911;'R2022a' 912};
end

if octave
    if nargin==2
        warning('HJW:ifversion:NoOctaveTest',...
            ['No version test for Octave was provided.',char(10),...
            'This function might return an unexpected outcome.']) %#ok<CHARTEN>
        if isnumeric(Rxxxxab)
            v=0.1*Rxxxxab+0.9*fix(Rxxxxab);v=round(100*v);
        else
            L=ismember(v_dict(:,1),Rxxxxab);
            if sum(L)~=1
                warning('HJW:ifversion:NotInDict',...
                    'The requested version is not in the hard-coded list.')
                tf=NaN;return
            else
                v=v_dict{L,2};
            end
        end
    elseif nargin==4
        % Undocumented shorthand syntax: skip the 'Octave' argument.
        [test,v]=deal(Oct_flag,Oct_test);
        % Convert 4.1 to 401.
        v=0.1*v+0.9*fix(v);v=round(100*v);
    else
        [test,v]=deal(Oct_test,Oct_ver);
        % Convert 4.1 to 401.
        v=0.1*v+0.9*fix(v);v=round(100*v);
    end
else
    % Convert R notation to numeric and convert 9.1 to 901.
    if isnumeric(Rxxxxab)
        v=0.1*Rxxxxab+0.9*fix(Rxxxxab);v=round(100*v);
    else
        L=ismember(v_dict(:,1),Rxxxxab);
        if sum(L)~=1
            warning('HJW:ifversion:NotInDict',...
                'The requested version is not in the hard-coded list.')
            tf=NaN;return
        else
            v=v_dict{L,2};
        end
    end
end
switch test
    case '==', tf= v_num == v;
    case '<' , tf= v_num <  v;
    case '<=', tf= v_num <= v;
    case '>' , tf= v_num >  v;
    case '>=', tf= v_num >= v;
end
end

##### SOURCE END #####
--></body></html>
